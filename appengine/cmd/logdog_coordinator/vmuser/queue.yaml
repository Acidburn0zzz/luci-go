# Copyright 2015 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

queue:
  # Pull queue for backend archival tasking. Tasks will be processed by an
  # archivist cluster.
  - name: archive-queue
    mode: pull
    acl:
      # luci-logdog (prod) GCE service account.
      - user_email: 43182045235-compute@developer.gserviceaccount.com
      # luci-logdog-dev GCE service account.
      - user_email: 38892607523-compute@developer.gserviceaccount.com
      # luci-logdog-dev developer service account.
      - user_email: service-account@luci-logdog-dev.iam.gserviceaccount.com

  # Push queue for tumble (from doc.go).
  #
  # These must scale with shards. The max_concurrent_requests and bucket_size
  # should equal the number of shards.
  - name: tumble
    rate: 1/s
    bucket_size: 1
    max_concurrent_requests: 1
    retry_parameters:
      task_age_limit: 1m
      min_backoff_seconds: 2
      max_backoff_seconds: 6
      max_doublings: 7
    target: backend
