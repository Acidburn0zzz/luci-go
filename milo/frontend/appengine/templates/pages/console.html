{{define "title"}}{{ .Console.Name }} Console{{end}}

{{define "head"}}
{{ if .Console.FaviconURL }}
<link rel="icon" type="{{ .Console.FaviconURL | faviconMIMEType }}" href="{{ .Console.FaviconURL }}" />
{{ end }}

{{ if .Reload }}
<meta http-equiv="refresh" content="{{ .Reload }}">
{{ end }}
<link rel="stylesheet" href="/static/common/css/console.css" type="text/css">
{{end}}

{{define "body"}}
{{ $console := .Console }}

<!-- Title -->
<div class="console-title">
{{ if $console.FaviconURL }}
  <img src="{{ .Console.FaviconURL }}" />
{{ end }}

  <h1>{{ $console.Name }}</h1>
</div>

<!-- Header -->
{{ if $console.Header }}
{{ $header := $console.Header }}
<div class="console-header">
{{ if $header.ConsoleGroups }}
  <div class="console-header-column" style="border-right: 1px solid silver">
  </div>
  <div class="console-header-column">
  {{ range $header.ConsoleGroups }}

    <!-- Header Group -->
    <!-- If the title is nil, don't wrap it in a special div. -->
    {{ if .Title.Label }}
    <div class="console-header-group">
      <div class="console-header-group-title">
        <a href="{{ .Title.URL }}">
          {{ .Title.Label }}
        </a>
      </div>
    {{ end }}
      <div class="console-column">
      {{ range .Consoles }}
        <div class="console-header-summary">
          <div class="console-header-name">
            <a href="{{ .Name.URL }}">{{ .Name.Label }}</a>
          </div>
          {{ range .Builders }}
            <div class="console-header-build status-{{ .LastFinishedStatus }}">
              <a href="#"><!-- TODO(mknyszek): Link to build. --></a>
            </div>
          {{ end }}
        </div>
      {{ end }}
      </div>
    <!-- If the title is nil, don't wrap it in a special div. -->
    {{ if .Title }}
    </div>
    {{ end }}

  {{ end }}
  </div>
{{ end }}
</div>
{{ end }}

<!-- Legend -->
<div id="legend">
  <table>
    <tr>
      <td>Legend:&nbsp;&nbsp;</td>
      <td class="status-Success" title="All tests passed">Passed</td>
      <td class="status-Failure" title="There is a new failure. Take a look!">Failed</td>
      <td class="status-Warning" title="It was failing before, and is still failing. Make sure you did not introduce new regressions">Failed&nbsp;Again</td>
      <td class="status-Running" title="The tests are still running">Running</td>
      <td class="status-Exception" title="Something went wrong with the test, there is no result">Exception</td>
    </tr>
  </table>
</div>
<div class="clear"></div>

<!-- Container -->
<div class="console-row">

  <!-- Commits -->
  <div class="console-column" style="justify-content: flex-end">
    <div class="console-row">
      <div class="console-commit-column">
      {{ range $console.Commit }}
        <div class="console-commit-item">{{ .CommitTime | localTime "N/A" }}</div>
      {{ end }}
      </div>
      <div class="console-commit-column">
      {{ range $console.Commit }}
        <div class="console-commit-item">
          <a href="{{.Revision.URL}}">
            <span class="commit" title="{{ .Description }}">
              {{ .AuthorEmail }}
            </span>
          </a>
        </div>
      {{ end }}
      </div>
    </div>
  </div>

  <!-- Table -->
  {{ $console.ConsoleTable }}
</div>

<div class="epiloge" style="margin-top: 1em">
  (Show:
  <a href="?numbuilds=">default</a>
  <a href="?numbuilds=25">25</a>
  <a href="?numbuilds=50">50</a>
  <a href="?numbuilds=100">100</a>
  <a href="?numbuilds=200">200</a>
  )
</div>

{{end}} <!-- Body -->
